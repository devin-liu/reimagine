<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reinterpret - Cognitive Reframing Tool</title>

    <!-- React and Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>


    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 3rem;
        }

        .back-link {
            display: inline-block;
            color: #667eea;
            text-decoration: none;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .back-link::before {
            content: "‚Üê ";
        }

        header {
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .tagline {
            font-size: 1.2rem;
            color: #666;
            font-style: italic;
            margin-bottom: 2rem;
        }

        section {
            margin-bottom: 2rem;
        }

        h2 {
            color: #764ba2;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        p {
            color: #555;
            margin-bottom: 1rem;
        }

        .features {
            display: grid;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .feature {
            padding: 1rem;
            background: #f8f8f8;
            border-left: 4px solid #667eea;
            border-radius: 4px;
        }

        .feature h3 {
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .cta {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            text-align: center;
        }

        .cta h3 {
            margin-bottom: 0.5rem;
        }

        footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #e0e0e0;
            color: #999;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">Back to Projects</a>

        <header>
            <h1>Reinterpret</h1>
            <p class="tagline">Transform your perspective, reshape your reality</p>
        </header>

        <main>
            <section>
                <h2>About</h2>
                <p>
                    Reinterpret is a cognitive reframing tool designed to help you view situations,
                    thoughts, and emotions from different perspectives. By exploring alternative
                    interpretations, you can develop more adaptive thinking patterns and enhance
                    emotional resilience.
                </p>
            </section>

            <section>
                <h2>Key Features</h2>
                <div class="features">
                    <div class="feature">
                        <h3>Perspective Shifting</h3>
                        <p>Learn to view challenges from multiple angles and discover new solutions.</p>
                    </div>
                    <div class="feature">
                        <h3>Cognitive Awareness</h3>
                        <p>Develop awareness of automatic thought patterns and cognitive biases.</p>
                    </div>
                    <div class="feature">
                        <h3>Emotional Growth</h3>
                        <p>Build emotional intelligence through understanding different interpretations.</p>
                    </div>
                </div>
            </section>

            <section>
                <h2>How It Works</h2>
                <p>
                    Reinterpret guides you through a structured process of examining your initial
                    interpretation of events, identifying underlying assumptions, and exploring
                    alternative ways of understanding the same situation. This practice strengthens
                    your cognitive flexibility and opens up new possibilities for growth and change.
                </p>
            </section>

            <!-- React App Root -->
            <div id="react-root"></div>
        </main>

        <footer>
            <p>Part of the Cognitive & Emotional Progression project suite</p>
        </footer>
    </div>

    <!-- React App Script -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Simple icon components using Unicode symbols
        const Icon = ({ children, className }) => <span className={className}>{children}</span>;
        const ChevronRight = ({ className }) => <Icon className={className}>‚Üí</Icon>;
        const RefreshCw = ({ className }) => <Icon className={className}>‚Üª</Icon>;
        const Award = ({ className }) => <Icon className={className}>üèÜ</Icon>;
        const CheckCircle = ({ className }) => <Icon className={className}>‚úì</Icon>;
        const Lightbulb = ({ className }) => <Icon className={className}>üí°</Icon>;

        const storageKey = 'i-can-app-data';

        const PainToleranceApp = () => {
          const [taskIntention, setTaskIntention] = useState('');
          const [taskDuration, setTaskDuration] = useState(25);
          const [painReasons, setPainReasons] = useState([
            { id: 'rejection', label: 'Rejection', selected: false },
            { id: 'judgement', label: 'Judgement', selected: false },
            { id: 'not-priority', label: 'Not Priority', selected: false },
            { id: 'boring', label: 'Boring', selected: false },
            { id: 'get-stuck', label: 'Get Stuck', selected: false }
          ]);

          const [currentStage, setCurrentStage] = useState('intention-setting');
          const [currentPainRating, setCurrentPainRating] = useState(0);
          const [expectedRestartPain, setExpectedRestartPain] = useState(0);
          const [countdown, setCountdown] = useState(0);

          const [progressLog, setProgressLog] = useState([]);
          const [successInsights, setSuccessInsights] = useState([]);
          const [actuallyCanStatements, setActuallyCanStatements] = useState([]);
          const startTimeRef = useRef(null);
          const [toleratedTime, setToleratedTime] = useState(0);
          const [remainingTime, setRemainingTime] = useState(0);

          const [isTaskTimerActive, setIsTaskTimerActive] = useState(false);

          const [currentCompletion, setCurrentCompletion] = useState(null);
          const [currentReflection, setCurrentReflection] = useState('');

          useEffect(() => {
            const loadedData = JSON.parse(localStorage.getItem(storageKey) || '{}');
            if (loadedData.progressLog) {
              setProgressLog(loadedData.progressLog);
            }
            if (loadedData.successInsights) {
              setSuccessInsights(loadedData.successInsights);
            }
            if (loadedData.actuallyCanStatements) {
              setActuallyCanStatements(loadedData.actuallyCanStatements);
            }
          }, []);

          useEffect(() => {
            localStorage.setItem(storageKey, JSON.stringify({
              progressLog,
              successInsights,
              actuallyCanStatements
            }));
          }, [progressLog, successInsights, actuallyCanStatements]);

          useEffect(() => {
            let timer;
            if (isTaskTimerActive && remainingTime > 0) {
              timer = setInterval(() => {
                setRemainingTime(prev => {
                  if (prev <= 1) {
                    handleTaskCompletion('time-limit');
                    return 0;
                  }
                  return prev - 1;
                });
              }, 1000);
            }
            return () => clearInterval(timer);
          }, [isTaskTimerActive, remainingTime]);

          useEffect(() => {
            let timer;
            if (currentStage === 'working') {
              startTimeRef.current = Date.now();
            }

            if (countdown > 0) {
              timer = setInterval(() => {
                setCountdown(prev => prev - 1);
              }, 1000);
            } else if (countdown === 0 && currentStage === 'countdown') {
              setCurrentStage('working');
            }
            return () => clearInterval(timer);
          }, [countdown, currentStage]);

          const startTask = () => {
            setRemainingTime(taskDuration * 60);
            setIsTaskTimerActive(true);
            setCurrentStage('working');
          };

          const handleTaskCompletion = (completionType = 'manual') => {
            const endTime = Date.now();
            const toleratedMinutes = startTimeRef.current
              ? Math.round((endTime - startTimeRef.current) / 60000)
              : 0;
            setToleratedTime(toleratedMinutes);

            setIsTaskTimerActive(false);

            const selectedReasons = painReasons
              .filter(reason => reason.selected)
              .map(reason => reason.label);

            const feedbackEntry = {
              taskIntention,
              completionType,
              date: new Date().toISOString(),
              painReasons: selectedReasons,
              currentPainRating,
              expectedRestartPain,
              toleratedTime: toleratedMinutes,
              plannedDuration: taskDuration,
              actualDuration: toleratedMinutes
            };

            setCurrentCompletion(feedbackEntry);
            setCurrentStage('reflection');
          };

          const submitReflection = () => {
            if (currentReflection.trim()) {
              const actuallyCanStatement = `Actually, I can ${currentReflection.trim()}`;
              setActuallyCanStatements(prev => [actuallyCanStatement, ...prev]);

              setCurrentStage('intention-setting');
              setTaskIntention('');
              setCurrentPainRating(0);
              setExpectedRestartPain(0);
              setPainReasons(prev => prev.map(reason => ({...reason, selected: false})));
              setCurrentReflection('');
              setCurrentCompletion(null);
            }
          };

          const renderStage = () => {
            switch(currentStage) {
              case 'intention-setting':
                return (
                  <div className="p-6 bg-gray-100 min-h-screen flex flex-col justify-center">
                    <h1 className="text-2xl font-bold mb-4">Prepare Your Task</h1>
                    <input
                      type="text"
                      value={taskIntention}
                      onChange={(e) => setTaskIntention(e.target.value)}
                      placeholder="What task are you going to do?"
                      className="w-full p-2 border rounded mb-4"
                    />
                    <div>
                      <h2 className="font-semibold mb-2">Potential Pain Points</h2>
                      {painReasons.map((reason) => (
                        <div key={reason.id} className="flex items-center mb-2">
                          <input
                            type="checkbox"
                            id={reason.id}
                            checked={reason.selected}
                            onChange={() => {
                              setPainReasons(prev =>
                                prev.map(r =>
                                  r.id === reason.id
                                    ? {...r, selected: !r.selected}
                                    : r
                                )
                              );
                            }}
                            className="mr-2"
                          />
                          <label htmlFor={reason.id}>{reason.label}</label>
                        </div>
                      ))}
                    </div>
                    <button
                      onClick={startTask}
                      className="mt-4 bg-blue-500 text-white p-2 rounded flex items-center justify-center"
                      disabled={!taskIntention.trim()}
                    >
                      Start Task <ChevronRight className="ml-2" />
                    </button>
                  </div>
                );

              case 'working':
                return (
                  <div className="p-6 bg-green-50 min-h-screen flex flex-col justify-center items-center">
                    <h1 className="text-2xl font-bold mb-4">Working on: {taskIntention}</h1>
                    <p>Stay focused. You're building tolerance!</p>
                    <button
                      onClick={() => {
                        setCurrentPainRating(0);
                        setCurrentStage('pain-feedback');
                      }}
                      className="mt-4 bg-red-500 text-white p-2 rounded"
                    >
                      Simulate Tabbing Out
                    </button>
                  </div>
                );

              case 'reflection':
                return (
                  <div className="p-6 bg-blue-50 min-h-screen flex flex-col justify-center">
                    <h1 className="text-2xl font-bold mb-4 flex items-center">
                      <Lightbulb className="mr-2 text-yellow-500" /> Task Reflection
                    </h1>

                    <div className="bg-white p-4 rounded shadow mb-4">
                      <h2 className="font-semibold">Task Details</h2>
                      <p><strong>Task:</strong> {currentCompletion?.taskIntention}</p>
                      <p><strong>Time Spent:</strong> {currentCompletion?.toleratedTime} minutes</p>

                      <h3 className="font-semibold mt-2">Pain Points</h3>
                      <ul className="list-disc list-inside">
                        {currentCompletion?.painReasons.map((reason, index) => (
                          <li key={index}>{reason}</li>
                        ))}
                      </ul>

                      <p className="mt-2">
                        <strong>Pain Rating:</strong> {currentCompletion?.currentPainRating}/10
                      </p>
                    </div>

                    <div className="mb-4">
                      <label className="block mb-2">Actually, I can...</label>
                      <textarea
                        value={currentReflection}
                        onChange={(e) => setCurrentReflection(e.target.value)}
                        placeholder="Write down what you've learned or accomplished"
                        className="w-full p-2 border rounded h-24"
                      />
                    </div>

                    <button
                      onClick={submitReflection}
                      className="bg-blue-500 text-white p-2 rounded flex items-center justify-center"
                      disabled={!currentReflection.trim()}
                    >
                      Complete Reflection <Award className="ml-2" />
                    </button>
                  </div>
                );

              case 'pain-feedback':
                return (
                  <div className="p-6 bg-red-50 min-h-screen flex flex-col justify-center">
                    <h1 className="text-2xl font-bold mb-4">Pain Acknowledgment</h1>

                    <div className="mb-4">
                      <h2 className="font-semibold mb-2">Why Did You Leave?</h2>
                      {painReasons.map((reason) => (
                        <div key={reason.id} className="flex items-center mb-2">
                          <input
                            type="checkbox"
                            id={reason.id}
                            checked={reason.selected}
                            onChange={() => {
                              setPainReasons(prev =>
                                prev.map(r =>
                                  r.id === reason.id
                                    ? {...r, selected: !r.selected}
                                    : r
                                )
                              );
                            }}
                            className="mr-2"
                          />
                          <label htmlFor={reason.id}>{reason.label}</label>
                        </div>
                      ))}
                    </div>

                    <div className="mb-4">
                      <label className="block mb-2">Current Pain Rating (0-10)</label>
                      <input
                        type="range"
                        min="0"
                        max="10"
                        value={currentPainRating}
                        onChange={(e) => setCurrentPainRating(Number(e.target.value))}
                        className="w-full"
                      />
                      <div className="text-center">{currentPainRating}</div>
                    </div>

                    <div className="mb-4">
                      <label className="block mb-2">Expected Restart Pain (0-10)</label>
                      <input
                        type="range"
                        min="0"
                        max="10"
                        value={expectedRestartPain}
                        onChange={(e) => setExpectedRestartPain(Number(e.target.value))}
                        className="w-full"
                      />
                      <div className="text-center">{expectedRestartPain}</div>
                    </div>

                    <div className="flex space-x-4">
                      <button
                        onClick={() => {
                          setCurrentStage('working');
                        }}
                        className="flex-1 bg-green-500 text-white p-2 rounded flex items-center justify-center"
                      >
                        <RefreshCw className="mr-2" /> Restart Task
                      </button>
                      <button
                        onClick={() => handleTaskCompletion('interrupted')}
                        className="flex-1 bg-blue-500 text-white p-2 rounded flex items-center justify-center"
                      >
                        <CheckCircle className="mr-2" /> Complete Task
                      </button>
                    </div>
                  </div>
                );

              default:
                return null;
            }
          };

          const renderProgressLog = () => {
            return (
              <div className="p-6 bg-gray-50">
                <h2 className="text-xl font-bold mt-6 mb-4 flex items-center">
                  <Lightbulb className="mr-2 text-blue-500" /> "Actually, I Can" Statements
                </h2>
                {actuallyCanStatements.length === 0 ? (
                  <p>Complete tasks to build your "Actually, I Can" collection!</p>
                ) : (
                  <div className="space-y-2">
                    {actuallyCanStatements.slice(0, 5).map((statement, index) => (
                      <div
                        key={index}
                        className="bg-white p-3 rounded shadow flex items-center"
                      >
                        <CheckCircle className="mr-3 text-green-500" />
                        <p>{statement}</p>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            );
          };

          return (
            <div className="min-h-screen bg-gray-100">
              <div className="container mx-auto">
                {renderStage()}
                {renderProgressLog()}
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('react-root'));
        root.render(<PainToleranceApp />);
    </script>
</body>
</html>